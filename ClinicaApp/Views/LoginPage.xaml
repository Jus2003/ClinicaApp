<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="ClinicaApp.Views.LoginPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:ClinicaApp.ViewModels"
             x:DataType="viewmodels:LoginViewModel"
             Shell.NavBarIsVisible="False"
             BackgroundColor="White">

    <ScrollView>
        <Grid RowDefinitions="*,Auto" Padding="40,60,40,40">

            <!-- Logo y título -->
            <StackLayout Grid.Row="0" VerticalOptions="Center" Spacing="30">

                <Label Text="🏥" FontSize="80" HorizontalOptions="Center" />

                <Label Text="Clínica App" 
                       FontSize="28" 
                       FontAttributes="Bold" 
                       TextColor="#2E7D32" 
                       HorizontalOptions="Center" />

                <!-- Formulario de login -->
                <Frame BackgroundColor="White" 
                       HasShadow="True" 
                       CornerRadius="15" 
                       Padding="25">

                    <StackLayout Spacing="20">

                        <Entry x:Name="EntryUsuario" 
                               Text="{Binding Usuario}"
                               Placeholder="Usuario" 
                               FontSize="16"
                               BackgroundColor="Transparent" />

                        <BoxView HeightRequest="1" BackgroundColor="LightGray" />

                        <Entry x:Name="EntryPassword" 
                               Text="{Binding Password}"
                               Placeholder="Contraseña" 
                               IsPassword="True" 
                               FontSize="16"
                               BackgroundColor="Transparent" />

                        <BoxView HeightRequest="1" BackgroundColor="LightGray" />

                        <!-- Botón de login -->
                        <Button Text="INICIAR SESIÓN" 
                                Command="{Binding LoginCommand}"
                                BackgroundColor="#4CAF50" 
                                TextColor="White" 
                                FontAttributes="Bold" 
                                FontSize="16" 
                                CornerRadius="25" 
                                HeightRequest="50" 
                                IsVisible="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}" />

                        <!-- Loading -->
                        <StackLayout IsVisible="{Binding IsLoading}" 
                                     HorizontalOptions="Center" 
                                     Orientation="Horizontal" 
                                     Spacing="10">
                            <ActivityIndicator IsRunning="{Binding IsLoading}" Color="#4CAF50" />
                            <Label Text="Iniciando sesión..." TextColor="Gray" />
                        </StackLayout>

                        <!-- Error message -->
                        <Label Text="{Binding ErrorMessage}" 
                               TextColor="Red" 
                               FontSize="14" 
                               IsVisible="{Binding ErrorMessage, Converter={StaticResource StringNotNullOrEmptyConverter}}"
                               HorizontalOptions="Center" />

                    </StackLayout>
                </Frame>

                <!-- Olvidé contraseña -->
                <Button Text="¿Olvidaste tu contraseña?" 
                        Command="{Binding ForgotPasswordCommand}"
                        BackgroundColor="Transparent" 
                        TextColor="#2E7D32" 
                        FontSize="14" />

            </StackLayout>

        </Grid>
    </ScrollView>
</ContentPage>